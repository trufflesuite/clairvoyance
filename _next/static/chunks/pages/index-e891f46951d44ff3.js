(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(67676)}])},67676:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return $}});var t=r(85893),o=r(9008),i=r.n(o),s=r(74682),a=r.n(s),c=r(66052),u=r(11163),d=r(2832),l=r.n(d),p=r(21581),v=r.n(p),f=r(67294),m=r(34051),h=r.n(m),x=r(41008);function y(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function j(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){y(e,n,r[n])}))}return e}var b=function(e){return e.map((function(e){var n=e.name,r=e.value,t=r.kind,o=r.type.typeClass,i={name:n,kind:t,typeClass:o,type:r.type};return j({},i,"struct"===o?{children:b(r.value)}:{value:r.value?r.value:r})}))},g=r(20640),w=r.n(g),k=function(e){var n=e.checksummedRecipientAddress,r=e.onRecipientClick,o=(e.addressOnly,e.recipientEns,e.recipientName,(0,f.useState)(!1)),i=o[0],s=o[1],a=n||"newContract";return(0,t.jsxs)("div",{className:"tx-insight tx-insight-component tx-insight-component-address",onClick:function(){w()(n),r&&r()},children:[(0,t.jsx)("div",{className:"tx-insight-component-address__sender-icon",children:"Identicon"}),(0,t.jsx)("div",{className:"address__name",onClick:function(){return s(!0)},children:a}),i?n:null]})};k.propTypes={checksummedRecipientAddress:v().string,recipientName:v().string,recipientEns:v().string,addressOnly:v().bool,onRecipientClick:v().func};var _=k;function N(e,n,r,t,o,i,s){try{var a=e[i](s),c=a.value}catch(u){return void r(u)}a.done?n(c):Promise.resolve(c).then(t,o)}var O=r(29489);function P(e){var n=e.decoder,r=e.options,o=e.from,i=e.tx,s=e.networkId,a=i.toJSON(),c=a.to,u=a.data,d=(0,f.useState)(),l=d[0],p=d[1];(0,f.useEffect)((function(){var e;(e=h().mark((function e(){var r,t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,n.decodeTransaction({from:o,to:c,input:u,blockNumber:null});case 3:r=e.sent,t=b(null===r||void 0===r?void 0:r.arguments),p(t);case 6:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function s(e){N(i,t,o,s,a,"next",e)}function a(e){N(i,t,o,s,a,"throw",e)}s(void 0)}))})()}),[n,r,o,c,s,u]);var v=function(e){var n=e.name,r=e.kind,o=e.typeClass,i=e.value;if("error"===r)return(0,t.jsx)("span",{className:"sol-item solidity-error",children:(0,t.jsx)("span",{children:"malformedData"})});switch(o){case"int":return(0,t.jsx)("span",{className:"sol-item solidity-int",children:[i.asBN||i.asString].toString()});case"uint":return(0,t.jsx)("span",{className:"sol-item solidity-uint",children:[i.asBN||i.asString].toString()});case"bytes":return(0,t.jsx)("span",{className:"sol-item solidity-bytes",children:i.asHex});case"array":return(0,t.jsxs)("details",{children:[(0,t.jsxs)("summary",{className:"typography--color-black",children:[n,": "]}),(0,t.jsx)("ol",{children:i.map((function(e,n){var r,o;return(0,t.jsx)("li",{children:v({typeClass:null===(r=e.type)||void 0===r?void 0:r.typeClass,value:e.value,kind:e.kind})},"".concat(null===(o=e.type)||void 0===o?void 0:o.typeClass,"-").concat(n))}))})]});case"address":var s=null===i||void 0===i?void 0:i.asAddress;return(0,t.jsx)(_,{addressOnly:!0,checksummedRecipientAddress:s});default:return(0,t.jsx)("pre",{className:"sol-item solidity-raw",children:O(new x.Format.Utils.Inspect.ResultInspector(i))})}},m=function(e,n){var r=e.name,o=e.kind,i=e.typeClass,s=e.type,a=e.value,c=e.children;return c?(0,t.jsx)("li",{children:(0,t.jsxs)("details",{open:0===n,children:[(0,t.jsxs)("summary",{children:[r,": "]}),(0,t.jsx)("ol",{children:c.map(m)})]})},"".concat(i,"-").concat(n)):(0,t.jsx)("li",{className:"solidity-value",children:(0,t.jsxs)("div",{className:"solidity-named-item solidity-item",children:["array"===i||Array.isArray(a)?null:(0,t.jsxs)("span",{className:"param-name typography--color-black",children:[r,": "]}),(0,t.jsx)("span",{className:"sol-item solidity-uint",children:v({name:r,typeClass:i,type:s,value:a,kind:o})})]})},"".concat(i,"-").concat(n))};return(0,t.jsx)("div",{className:"tx-insight",children:(0,t.jsx)("div",{className:"tx-insight-content",children:(0,t.jsx)("div",{className:"tx-insight-content__tree-component",children:(0,t.jsx)("ol",{children:l?l.map(m):"Loading..."})})})})}function I(e,n,r,t,o,i,s){try{var a=e[i](s),c=a.value}catch(u){return void r(u)}a.done?n(c):Promise.resolve(c).then(t,o)}function C(e){var n=e.event,r=e.decoder,o=(0,f.useState)(null),i=o[0],s=o[1];return(0,f.useEffect)((function(){var e;(e=h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===r||void 0===r?void 0:r.decodeLog({address:n.address,data:n.data,topics:n.topics,logIndex:parseInt(n.logIndex,16),transactionIndex:parseInt(n.transactionIndex,16),transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:parseInt(n.blockNumber,16)},{extras:"necessary"});case 3:t=e.sent,s(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function s(e){I(i,t,o,s,a,"next",e)}function a(e){I(i,t,o,s,a,"throw",e)}s(void 0)}))})()}),[r,n]),(0,t.jsx)("div",{className:"events",children:i?(0,t.jsx)("div",{children:JSON.stringify(i)}):(0,t.jsx)("div",{children:"Decoding..."})})}function S(e){var n=e.events,r=e.decoder;return(0,t.jsx)("div",{className:"events",children:n?n.length>0?(0,t.jsx)("div",{children:(0,t.jsx)("ul",{children:n.map((function(e,n){return(0,t.jsx)("li",{children:(0,t.jsx)(C,{decoder:r,event:e})},"event_"+n.toString())}))})}):(0,t.jsx)("div",{children:"No events"}):(0,t.jsx)("div",{children:"waiting on events"})})}function R(e){var n=e.progress;return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:"Progress:"}),(0,t.jsx)("div",{className:"loading"}),n?(0,t.jsxs)("div",{children:[n.name," ",n.fee," gas"]}):(0,t.jsx)("div",{children:"initializing..."})]})}P.propTypes={tx:v().object.isRequired,from:v().string.isRequired,networkId:v().number.isRequired,options:v().object.isRequired,provider:v().object.isRequired,decoder:v().object},R.propTypes={progress:v().object};var H=r(8100);function E(e,n,r,t,o,i,s){try{var a=e[i](s),c=a.value}catch(u){return void r(u)}a.done?n(c):Promise.resolve(c).then(t,o)}var T=function(e){var n,r=e.provider,t=(0,f.useState)(null),o=t[0],i=t[1];return(0,H.ZP)("/progress-listener",(n=h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"eth_subscribe",params:["newHeads"]});case 2:r.on("ganache:vm:tx:step",(function(e){i(e.data.opcode)}));case 3:case"end":return e.stop()}}),e)})),function(){var e=this,r=arguments;return new Promise((function(t,o){var i=n.apply(e,r);function s(e){E(i,t,o,s,a,"next",e)}function a(e){E(i,t,o,s,a,"throw",e)}s(void 0)}))})),{progress:o}};function q(e,n,r,t,o,i,s){try{var a=e[i](s),c=a.value}catch(u){return void r(u)}a.done?n(c):Promise.resolve(c).then(t,o)}function D(e,n){var r=n.toJSON();return r.from=e,delete r.nonce,r}var L=function(e){var n,r=e.provider,t=e.tx,o=e.from,i=(0,H.ZP)("/transaction-receipt",(n=h().mark((function e(){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"eth_sendTransaction",params:[D(o,t)]});case 2:return n=e.sent,e.next=5,r.request({method:"eth_getTransactionReceipt",params:[n]});case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})),function(){var e=this,r=arguments;return new Promise((function(t,o){var i=n.apply(e,r);function s(e){q(i,t,o,s,a,"next",e)}function a(e){q(i,t,o,s,a,"throw",e)}s(void 0)}))})).data;return{receipt:i}};function A(e){var n=e.decoder,r=e.provider,o=e.tx,i=e.from,s=T({provider:r}).progress,a=L({provider:r,tx:o,from:i}).receipt;return(0,t.jsxs)("div",{children:[(0,t.jsx)(S,{decoder:n,events:(null===a||void 0===a?void 0:a.logs)||null}),(0,t.jsx)(R,{progress:s}),(0,t.jsx)("pre",{children:(0,t.jsx)("code",{children:JSON.stringify(a,null,2)})})]})}var B=r(24104),J=r.n(B);function U(e,n,r,t,o,i,s){try{var a=e[i](s),c=a.value}catch(u){return void r(u)}a.done?n(c):Promise.resolve(c).then(t,o)}function Z(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function F(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){Z(e,n,r[n])}))}return e}var Q=function(e){var n,r=(0,H.ZP)("/provider",(n=h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",J().provider(F({logging:{logger:{log:function(){}}}},e)));case 1:case"end":return n.stop()}}),n)})),function(){var e=this,r=arguments;return new Promise((function(t,o){var i=n.apply(e,r);function s(e){U(i,t,o,s,a,"next",e)}function a(e){U(i,t,o,s,a,"throw",e)}s(void 0)}))})),t=r.data,o=r.error;r.mutate;if(o)throw new Error(o);return{provider:t||null}},X=r(77806),z="".concat("https://tx-insights.metaswap.codefi.network","/networks");function G(e,n,r,t,o,i,s){try{var a=e[i](s),c=a.value}catch(u){return void r(u)}a.done?n(c):Promise.resolve(c).then(t,o)}function K(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function s(e){G(i,t,o,s,a,"next",e)}function a(e){G(i,t,o,s,a,"throw",e)}s(void 0)}))}}function W(e){return Y.apply(this,arguments)}function Y(){return(Y=K(h().mark((function e(n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(n).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function V(e){var n=e.options,r=(0,f.useState)("simulation"),o=r[0],i=r[1],s=Q(n.options).provider,a=function(e){var n=e.key,r=e.provider,t=e.to,o=e.networkId,i=e.chainId,s=(0,H.ZP)("/decoder-"+n,K(h().mark((function e(){var n,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,W(z);case 4:if(e.sent.some((function(e){return e.active&&BigInt(e.chainId)===BigInt(i)}))){e.next=7;break}throw new Error("transactionDecodingUnsupportedNetworkError: "+i);case 7:return n="".concat("http://localhost:8080/address","?").concat(new URLSearchParams({address:t,"network-id":BigInt(o).toString()})),e.next=10,W(n);case 10:return s=e.sent,e.next=13,(0,X.forAddress)(t,{provider:r,projectInfo:{commonCompilations:s.compileResult.compilations}});case 13:return a=e.sent,e.abrupt("return",{commonCompilations:s.compileResult.compilations,decoder:a});case 15:case"end":return e.stop()}}),e)})))),a=s.data,c=(s.error,s.mutate);return(0,f.useEffect)((function(){r&&c()}),[r]),{commonCompilations:(null===a||void 0===a?void 0:a.commonCompilations)||null,decoder:(null===a||void 0===a?void 0:a.decoder)||null}}(function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){M(e,n,r[n])}))}return e}({},n,{provider:s})).decoder;return s?(0,t.jsxs)("div",{className:"tx-insight",children:[(0,t.jsx)(P,{decoder:a,provider:s,options:n.options,from:n.from,tx:n.tx,networkId:n.networkId}),(0,t.jsxs)("div",{className:"tabs",children:[(0,t.jsxs)("div",{className:"tab-container>",children:[(0,t.jsx)("button",{className:"simulation"===o?"tab-active":"",onClick:function(){return i("simulation")},children:"Simulation"}),(0,t.jsx)("button",{className:"debug"===o?"tab-active":"",onClick:function(){return i("debug")},children:"Debug"})]}),(0,t.jsx)("div",{className:"tabContents",children:"simulation"===o?(0,t.jsx)(A,{from:n.from,tx:n.tx,decoder:a,provider:s}):(0,t.jsx)("div",{children:"todo"})})]})]}):(0,t.jsx)("div",{children:"Loading..."})}V.propTypes={options:v().object.isRequired};var $=function(){var e=(0,u.useRouter)();if(!e.isReady)return(0,t.jsx)("div",{className:a().container,children:"Loading... "});var n=function(e){var n={};try{var r=JSON.parse(e.tx);if(r){var t=new Set([1,3,4,5,42,11155111]),o=parseInt(e.chainId),i=parseInt(e.networkId),s=l().forCustomChain(t.has(o)?o:1,{name:"ganache-fork",defaultHardfork:"london",networkId:i,chainId:o,comment:"Local test network fork"});n.tx=c.TransactionFactory.fromTxData(r,{common:s}),n.from=r.from,n.networkId=i,n.chainId=o,n.to=n.tx.to.toString(),n.options={fork:{url:e.rpcUrl,blockNumber:parseInt(e.blockNumber)},chain:{chainId:o,networkId:i},wallet:{unlockedAccounts:[r.from]}}}}catch(a){console.error(a)}return n}(e.query);return console.log("init Home"),(0,t.jsxs)("div",{suppressHydrationWarning:!0,className:a().container,children:[(0,t.jsx)(i(),{children:(0,t.jsx)("title",{children:"Clairvoyance"})}),(0,t.jsx)(V,{options:n})]})}},74682:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}},77696:function(){},41563:function(){},46601:function(){},89214:function(){},27790:function(){},52361:function(){},94616:function(){},6567:function(){}},function(e){e.O(0,[482,714,371,43,604,774,888,179],(function(){return n=48312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);