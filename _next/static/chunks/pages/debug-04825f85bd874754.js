(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{60467:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/debug",function(){return t(13709)}])},13709:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return jn}});var r=t(34051),i=t.n(r),o=t(85893),a=t(68527),s=t(11163),u=t(3283),c=t.n(u),l=t(67294),f=t(8100),d=t(10894),h=t(86541),p=t(15193),v=t(49609),b=t(5434),g=t(49293);function m(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function x(n,e,t,r,i,o,a){try{var s=n[o](a),u=s.value}catch(c){return void t(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function y(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){x(o,r,i,a,s,"next",n)}function s(n){x(o,r,i,a,s,"throw",n)}a(void 0)}))}}function w(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,o=[],a=!0,s=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw i}}return o}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return m(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j,S=function(n){var e=n.isStepping,t=n.isAtEnd;return e||t},P=function(n){var e=n.session,t=(0,l.useState)(!1),r=t[0],a=t[1],s=0===e.view(g.selectors.trace.index),u=e.view(g.selectors.trace.finished),c=(0,f.kY)().mutate,m=function(){c("/variables"),c("/currentSourceRange")},x=function(n){return{continue:{Icon:function(){return(0,o.jsx)(d.JO,{as:b.yV_})},label:"Continue until breakpoint",shouldDisable:S,step:y(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.continueUntilBreakpoint();case 2:case"end":return e.stop()}}),e)})))},next:{Icon:function(){return(0,o.jsx)(d.JO,{as:b.p0p})},label:"Step next",shouldDisable:S,step:y(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.stepNext();case 2:case"end":return e.stop()}}),e)})))},reset:{Icon:function(){return(0,o.jsx)(d.JO,{as:b.FVj})},label:"Reset to beginning",shouldDisable:function(n){var e=n.isStepping,t=n.isAtStart;return e||t},step:y(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.reset();case 2:case"end":return e.stop()}}),e)})))}}}(e),j=Object.entries(x).map((function(n){var e=w(n,2),t=e[0],i=e[1],c=i.Icon,l=i.label,f=i.step,d=i.shouldDisable;return(0,o.jsx)(h.u,{label:l,children:(0,o.jsx)(p.hU,{"aria-label":l,icon:(0,o.jsx)(c,{}),disabled:d({isStepping:r,isAtStart:s,isAtEnd:u}),onClick:function(){a(!0),f().then(m).then((function(){a(!1)}))}})},t)})),P=r?(0,o.jsx)(v.$,{}):(0,o.jsx)(o.Fragment,{});return(0,o.jsxs)(p.hE,{children:[j,P]})},k=t(41008);function O(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function R(n,e,t,r,i,o,a){try{var s=n[o](a),u=s.value}catch(c){return void t(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function I(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){R(o,r,i,a,s,"next",n)}function s(n){R(o,r,i,a,s,"throw",n)}a(void 0)}))}}function E(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,o=[],a=!0,s=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw i}}return o}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return O(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return O(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(n){n.Initializing="initializing",n.Fetching="fetching",n.Starting="starting",n.Ready="ready"}(j||(j={}));function A(n){return C.apply(this,arguments)}function C(){return(C=I(i().mark((function n(e){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.transactionHash,r=e.provider,n.next=3,g.forTx(t,{provider:r,compilations:[],lightMode:!0});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function _(n){return F.apply(this,arguments)}function F(){return(F=I(i().mark((function n(e){var t,r,o,a,s,u,c,l,f,d,h,p,v;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.session,r=e.fetchCompilations,o=t.selectors,a=t.view(o.session.info.affectedInstances),s=Object.entries(a).filter((function(n){var e=E(n,2);e[0];return void 0===e[1].contractName})).map((function(n){var e=E(n,2),t=e[0];e[1];return t})),u=!0,c=!1,l=void 0,n.prev=5,f=s[Symbol.iterator]();case 7:if(u=(d=f.next()).done){n.next=19;break}return h=d.value,n.next=11,r(h);case 11:return p=n.sent,v=k.Compilations.Utils.shimCompilations(p,"externalFor(".concat(h,")Via(Etherscan)")),console.debug("shimmedCompilations %o",v),n.next=16,t.addExternalCompilations(v);case 16:u=!0,n.next=7;break;case 19:n.next=25;break;case 21:n.prev=21,n.t0=n.catch(5),c=!0,l=n.t0;case 25:n.prev=25,n.prev=26,u||null==f.return||f.return();case 28:if(n.prev=28,!c){n.next=31;break}throw l;case 31:return n.finish(28);case 32:return n.finish(25);case 33:case"end":return n.stop()}}),n,null,[[5,21,25,33],[26,,28,32]])})))).apply(this,arguments)}var N,z=t(1864),T=t.n(z),Z=t(99839),H=t(29736);function M(n,e,t,r,i,o,a){try{var s=n[o](a),u=s.value}catch(c){return void t(c)}s.done?e(u):Promise.resolve(u).then(r,i)}!function(n){n.Waiting="waiting",n.Pending="pending",n.Ready="ready",n.Failed="failed"}(N||(N={}));var W,D=function(n){var e,t=n.session,r=(0,f.ZP)("/sources",(e=i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.debug("fetching sources"),t){n.next=3;break}return n.abrupt("return");case 3:return n.abrupt("return",t.view(g.selectors.sourcemapping.views.sources));case 4:case"end":return n.stop()}}),n)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(n){M(o,r,i,a,s,"next",n)}function s(n){M(o,r,i,a,s,"throw",n)}a(void 0)}))})),o=r.data,a=r.error,s=r.mutate;(0,l.useEffect)((function(){t&&s()}),[t,s]);var u=t?a?N.Failed:o?N.Ready:N.Pending:N.Waiting;return u===N.Ready?{sources:Object.values(o).flatMap((function(n){var e=n.id,t=n.sourcePath,r=n.source,i=n.language;return"Solidity"===i?[{id:e,sourcePath:t,contents:r,language:i}]:[]})),status:u}:{status:u}};function U(n,e,t,r,i,o,a){try{var s=n[o](a),u=s.value}catch(c){return void t(c)}s.done?e(u):Promise.resolve(u).then(r,i)}!function(n){n.Waiting="waiting",n.Pending="pending",n.Ready="ready",n.Failed="failed"}(W||(W={}));var L,V=function(n){var e,t=n.session,r=(0,f.ZP)("/currentSourceRange",(e=i().mark((function n(){var e,r,o,a,s,u;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return e=t.view(g.selectors.trace.index),r=t.view(g.selectors.sourcemapping.current.source).id,o=t.view(g.selectors.sourcemapping.current.sourceRange),a=o.lines,s=a.start,u=a.end,n.abrupt("return",{traceIndex:e,source:{id:r},start:s,end:u});case 6:case"end":return n.stop()}}),n)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(n){U(o,r,i,a,s,"next",n)}function s(n){U(o,r,i,a,s,"throw",n)}a(void 0)}))})),o=r.data,a=r.error,s=r.mutate;(0,l.useEffect)((function(){t&&s()}),[t,s]);var u=t?a?W.Failed:o?W.Ready:W.Pending:W.Waiting;return u===W.Ready?{currentSourceRange:o,status:u}:{status:u}},X=t(18835),B=t.n(X),G=t(63081),J=t(26912),K=t.n(J),Y=t(96988),$=t.n(Y),q=t(53918),Q=function(n,e,t){return function(r){return"rgba(".concat(n,",").concat(e,",").concat(t,",").concat(r,")")}};!function(n){n.LIGHT="light",n.DARK="dark"}(L||(L={}));var nn="#d60000",en="#47BAA7",tn=(Q(220,220,220),Q(108,136,209),Q(209,0,0),Q(248,245,240),"#efe5dc");function rn(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function on(){var n=rn(["\n  background: ",";\n/*border-color: ",";*/\n  border-width: 1px;\n  border-style: solid;\n  border-radius: 0.4rem;\n  width: fit-content;\n  min-width: 100%;\n\n  &:hover .fas.fa-dot-circle.faded {\n    color: ",";\n    opacity: 0.5;\n  }\n"]);return on=function(){return n},n}function an(){var n=rn(['\n  font-family: "Ubuntu Mono", monospace;\n  white-space: pre;\n  padding-left: 0.2rem;\n  cursor: text;\n']);return an=function(){return n},n}function sn(){var n=rn(["\n  color: ",";\n  padding-left: 0.2rem;\n  cursor: pointer;\n"]);return sn=function(){return n},n}function un(){var n=rn(["\n  text-align: center;\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  padding-left: 0.2rem;\n  width: 1.1rem;\n  height: 1rem;\n"]);return un=function(){return n},n}var cn=tn,ln=q.ZP.div(on(),(function(n){var e=n.selected;return"".concat(e?"#fffbbc":cn)}),(function(n){var e=n.selected;return"".concat(e?"#fbbd7a":cn)}),nn),fn=q.ZP.span(an()),dn=q.ZP.span(sn(),"#c8c8c8"),hn=(q.ZP.i(un(),(function(n){return n.isBreakpoint?nn:tn})),function(n){n.source;var e=n.lineContents,t=n.lineNumber,r=n.lineRef,i=n.selected,a=n.lineNumbersGutterWidth,s=(t+1).toString(),u="".concat(" ".repeat(a-s.length)).concat(s);return(0,o.jsx)(ln,{selected:i,ref:r,children:(0,o.jsxs)(fn,{children:[(0,o.jsxs)(dn,{children:[u,"."," "]}),(0,o.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})]})},"contract-source-".concat(t))});function pn(){var n,e,t=(n=["\n  .hljs-comment,\n  .hljs-quote {\n    color: ",";\n    font-style: italic;\n  }\n\n  .hljs-keyword,\n  .hljs-selector-tag,\n  .hljs-subst {\n    color: ",";\n    font-weight: bold;\n  }\n\n  .hljs-number,\n  .hljs-literal,\n  .hljs-variable,\n  .hljs-template-variable,\n  .hljs-tag .hljs-attr {\n    color: ",";\n  }\n\n  .hljs-string,\n  .hljs-doctag {\n    color: ",";\n  }\n\n  .hljs-title,\n  .hljs-section,\n  .hljs-selector-id {\n    color: ",";\n    font-weight: bold;\n  }\n\n  .hljs-subst {\n    font-weight: normal;\n  }\n\n  .hljs-type,\n  .hljs-class .hljs-title {\n    color: ",";\n    font-weight: bold;\n  }\n\n  .hljs-tag,\n  .hljs-name,\n  .hljs-attribute {\n    color: ",";\n    font-weight: normal;\n  }\n\n  .hljs-built_in,\n  .hljs-builtin-name {\n    color: ",";\n  }\n"],e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}})));return pn=function(){return t},t}var vn=q.ZP.div(pn(),"rgba(0, 0, 0, 0.5)","#ea1bc0","#b3004f","#e4a663",en,en,en,en);K().registerLanguage("solidity",$().solidity);var bn=function(n){var e=n.source,t=n.currentSourceRange,r=e.id,i=e.sourcePath,s=e.contents,u=(0,l.useState)(0),c=(u[0],u[1],(0,l.useRef)(null),(0,l.useState)("")),f=c[0],d=c[1],h=(null===t||void 0===t?void 0:t.start.line)||0;(0,l.useEffect)((function(){Promise.resolve().then((function(){var n=B()().use(G.Z);d(n.stringify({type:"root",children:K().highlight("solidity",s).value}).toString())}))}),[s]),console.debug("highlightedSource %s",f);var p=f.split("\n"),v=p.length.toString().length,b=p.map((function(n,e){return(0,l.createRef)()}));(0,l.useEffect)((function(){var n,e;null===(n=b[h])||void 0===n||null===(e=n.current)||void 0===e||e.scrollIntoView({block:"nearest",inline:"nearest"})}),[h]);var g=b.map((function(n,i){var a=p[i],s=!!t&&i>=t.start.line&&(null===t.end.line||i<=t.end.line);return(0,o.jsx)(hn,{source:e,lineContents:a,lineNumber:i,selected:s,lineRef:n,lineNumbersGutterWidth:v},"".concat(r,"-line-").concat(i))}));return(0,o.jsxs)(a.xu,{height:"100%",children:[(0,o.jsx)(a.X6,{children:i}),(0,o.jsx)(a.xu,{height:"100%",overflow:"scroll",children:(0,o.jsx)(vn,{children:g})})]})};function gn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var mn=function(n){var e=n.session;window.bugger=e,window.mutate=(0,f.kY)().mutate;var t=D({session:e}),r=t.sources,i=t.status,a=V({session:e}),s=a.currentSourceRange,u=(a.status,e.view(g.selectors.trace.finished));console.debug("isFinished %o",u);var c=(r||[]).map((function(n,e){return gn({},n.id,e)})).reduce((function(n,e){return function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){gn(n,e,t[e])}))}return n}({},n,e)}),{}),d=(0,l.useState)(0),h=d[0],p=d[1],v=(0,l.useState)(void 0),b=v[0],m=v[1],x=null===s||void 0===s?void 0:s.traceIndex,y=u||null===s||void 0===s?void 0:s.source.id,w=c[y||""]||0;return console.debug("currentTabIndex %s",w),(0,l.useEffect)((function(){y&&x!==b&&p(w)}),[y,w,x,b]),r?(0,o.jsxs)(Z.mQ,{height:"100%",index:h,onChange:function(n){m(x),p(n)},children:[(0,o.jsx)(Z.td,{overflowY:"hidden",sx:{scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"}},children:r.map((function(n){var e=n.id,t=n.sourcePath;return e===y?(0,o.jsxs)(Z.OK,{children:[(0,o.jsx)(H.XC,{}),T().basename(t)]},e):(0,o.jsx)(Z.OK,{children:T().basename(t)},e)}))}),(0,o.jsx)(Z.nP,{height:"100%",children:r.map((function(n){return(0,o.jsx)(Z.x4,{height:"100%",children:s&&s.source.id===n.id?(0,o.jsx)(bn,{source:n,currentSourceRange:s}):(0,o.jsx)(bn,{source:n})},n.id)}))})]}):(0,o.jsxs)("p",{children:["Loading sources, status: ",i]})},xn=t(9669),yn=t.n(xn);function wn(n,e,t,r,i,o,a){try{var s=n[o](a),u=s.value}catch(c){return void t(c)}s.done?e(u):Promise.resolve(u).then(r,i)}var jn=function(){var n=(0,s.useRouter)(),e=function(n){var e=n.url;return new(c().providers.HttpProvider)(e)}({url:"http://erigon.dappnode:8545"}),t=function(){var n,e=(n=i().mark((function n(e){var t,r,o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,yn().get("http://localhost:8080/address?address=".concat(e,"&network-id=1"));case 3:return t=n.sent,r=t.data,o=r.compileResult.compilations,n.abrupt("return",o);case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return",[]);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){wn(o,r,i,a,s,"next",n)}function s(n){wn(o,r,i,a,s,"throw",n)}a(void 0)}))});return function(n){return e.apply(this,arguments)}}(),r=function(n){var e=n.transactionHash,t=n.provider,r=n.fetchCompilations,o=(0,l.useState)(),a=o[0],s=o[1],u=(0,l.useState)(j.Initializing),c=u[0],f=u[1];if((0,l.useEffect)((function(){a||Promise.resolve().then(I(i().mark((function n(){var o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f(j.Initializing),n.next=3,A({transactionHash:e,provider:t});case 3:return o=n.sent,s(o),f(j.Fetching),n.next=8,_({session:o,fetchCompilations:r});case 8:return f(j.Starting),n.next=11,o.startFullMode();case 11:f(j.Ready);case 12:case"end":return n.stop()}}),n)}))))}),[a,t,e,r]),c===j.Ready){if(!a)throw new Error("Internal error: expected session to be defined");return{status:c,session:a}}return{status:c}}({transactionHash:"0x12a339d1cb4014974199fdd21f9474b1b6909035a4c3d208165f1f3ba433416f",provider:e,fetchCompilations:t}),u=r.session,f=r.status;return n.isReady&&"ready"===f?(0,o.jsx)(a.xu,{width:"100vw",height:"70vh",children:(0,o.jsxs)(a.xu,{width:"100%",height:"100%",children:[(0,o.jsx)(P,{session:u}),(0,o.jsx)(mn,{session:u})]})}):(0,o.jsx)("p",{children:"Loading... "})}},77696:function(){},10346:function(){},46601:function(){},89214:function(){},71922:function(){},2363:function(){},27790:function(){},52361:function(){},94616:function(){},6567:function(){}},function(n){n.O(0,[482,714,43,228,177,64,774,888,179],(function(){return e=60467,n(n.s=e);var e}));var e=n.O();_N_E=e}]);